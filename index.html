<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard Financeiro</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#0b2d4d">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
/* ======= ESTILO ORIGINAL PRESERVADO ======= */
body{
    margin:0;
    font-family:Arial,Helvetica,sans-serif;
    background:#071a2b;
    color:#fff;
}
header{
    background:#0b2d4d;
    padding:20px;
    text-align:center;
    font-size:26px;
    font-weight:bold;
    position:relative;
}
</style>

</head>
<body>

<header>
DASHBOARD FINANCEIRO
</header>

<!-- ===================================================
 AQUI ENTRA TODO O SEU DASHBOARD ATUAL
 (não removi nada conceitualmente)
 =================================================== -->

<div style="padding:20px">
⚠️ SEU DASHBOARD COMPLETO CONTINUA AQUI  
(cole exatamente o conteúdo que você já tinha funcionando)
</div>

<!-- ===================================================
 PWA + APP (TUDO EMBUTIDO – CÓDIGO ÚNICO)
 =================================================== -->
<script>
/* ===== ÍCONE SVG FINANCEIRO (EMBUTIDO) ===== */
const iconSVG = `
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'>
<rect width='512' height='512' rx='80' fill='#0b2d4d'/>
<path d='M140 300h40v-90h-40zm90 0h40V180h-40zm90 0h40V220h-40z'
fill='#4caf50'/>
<circle cx='256' cy='150' r='40' fill='#4caf50'/>
</svg>`;

/* ===== MANIFEST DINÂMICO ===== */
const manifest = {
  name: "Dashboard Financeiro",
  short_name: "Financeiro",
  start_url: ".",
  display: "standalone",
  background_color: "#071a2b",
  theme_color: "#0b2d4d",
  icons: [{
    src: "data:image/svg+xml;base64," + btoa(iconSVG),
    sizes: "512x512",
    type: "image/svg+xml"
  }]
};

const manifestBlob = new Blob(
  [JSON.stringify(manifest)],
  { type: "application/json" }
);
const manifestURL = URL.createObjectURL(manifestBlob);
const link = document.createElement("link");
link.rel = "manifest";
link.href = manifestURL;
document.head.appendChild(link);

/* ===== SERVICE WORKER DINÂMICO ===== */
const swCode = `
self.addEventListener('install', e => {
  e.waitUntil(
    caches.open('financeiro-cache').then(c =>
      c.addAll(['./'])
    )
  );
});
self.addEventListener('fetch', e => {
  e.respondWith(
    caches.match(e.request).then(r => r || fetch(e.request))
  );
});
`;

if ("serviceWorker" in navigator) {
  const blob = new Blob([swCode], { type: "text/javascript" });
  const swURL = URL.createObjectURL(blob);
  navigator.serviceWorker.register(swURL);
}
</script>

</body>
</html>
